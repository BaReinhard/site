---
layout: null
---
<!doctype html>
<html lang="en" dir="ltr">
<head>
	<meta charset="utf-8" />
	<title>Search</title>

	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Reem+Kufi|Open+Sans:400,400i" />
	{% comment %}
	* Open Sans - Regular
	* Open Sans - Italic
	* Reem Kufi - Regular

	You can choose more faces here:
	https://fonts.google.com/selection?selection.family=Open+Sans:400,400i|Reem+Kufi
	{% endcomment %}
	<link href="/assets/css/beta.css" rel="stylesheet" />

	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
</head>
<body>

	<header>

		<h2><a href="/"><img src="/assets/images/fola.svg" alt="Food Oasis Los Angeles" /></a></h2>
		<p>Healthy Food for All Angelenos</p>

		<p class="action"><a href="/#navigation">Menu</a></p>

	</header>

	<main>

		<form action="/locations/" method="get">
			<input type="hidden" name="type" id="hidden-type" />

			<p>
				<label>
					<img src="/assets/images/icons/search-black.svg" width="50" alt="Search" style="vertical-align: middle;" />
					<!--<small>Address, ZIP or Intersection</small>-->
					<input type="search" name="address" placeholder="Los Angeles" />
				</label>
				<button type="submit">Search</button>
			</p>

			<ul class="list">
				<li>
					<label>
						<img src="/assets/images/home/food-pantry.svg" width="100" style="width: auto; height: 1.5em; border-radius: 50%; vertical-align: middle; margin-right: 0.375em; padding: 0.375em; background: rgb(249, 192, 88); /* @canteloupe */" alt="" />
						<span class="category">Free</span><br />
						<span class="type">Food Pantries</span>
						<input type="checkbox" name="type_option" value="food-pantry" checked="checked" />
					</label>
				</li>
				<li>
					<label>
						<img src="/assets/images/home/community-garden.svg" width="100" style="width: auto; height: 1.5em; border-radius: 50%; vertical-align: middle; margin-right: 0.375em; padding: 0.375em; background: rgb(144, 194, 70); /* @lime */" alt="" />
						<span class="category">Grow</span><br />
						<span class="type">Community Gardens</span>
						<input type="checkbox" name="type_option" value="community-garden" checked="checked" />
					</label>
				</li>
				<li>
					<label>
						<img src="/assets/images/home/farmers-market.svg" width="100" style="width: auto; height: 1.5em; border-radius: 50%; vertical-align: middle; margin-right: 0.375em; padding: 0.375em; background: rgb(241, 95, 91); /* @strawberry */" alt="" />
						<span class="category">Buy</span><br />
						<span class="type">Farmers Markets</span>
						<input type="checkbox" name="type_option" value="farmers-market" checked="checked" />
					</label>
				</li>
				<li>
				<del>
					<label>
						<img src="/assets/images/home/grocery-store.svg" width="100" style="width: auto; height: 1.5em; border-radius: 50%; vertical-align: middle; margin-right: 0.375em; padding: 0.375em; background: rgb(241, 95, 91); /* @strawberry */" alt="" />
						<span class="category">Buy</span><br />
						<span class="type">Grocery Stores</span>
						<input type="checkbox" name="type_option" value="grocery-store" disabled="disabled" />
						<mark>Coming soon!</mark>
					</label>
				</del>
				</li>
			</ul>

			<!--
			<ul class="options">
				<li><a href="/">Cancel</a></li>
				<li><button type="submit">Search</button></li>
			</ul>
			-->
		</form>

		<script>
		(function() {
			// http://stackoverflow.com/questions/901115/how-can-i-get-query-string-values-in-javascript#answer-901144	
			function getParameterByName(name, url) {
				if (!url) url = window.location.href;
				name = name.replace(/[\[\]]/g, "\\$&");
				var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
						results = regex.exec(url);
				if (!results) return null;
				if (!results[2]) return '';
				return decodeURIComponent(results[2].replace(/\+/g, " "));
			}

			// SHIM: Make the type persistent
			var type = getParameterByName('type');
			if (type) {
				var types = type.split('|');
				var typeFields = document.querySelectorAll('input[name="type_option"]:checked');
				for (var index = 0; index < typeFields.length; index++) {
					(function() {
						var field = typeFields[index];
						for (var j = 0; j < types.length; j++) {
							if (types[j] === field.value) {
								field.checked = true;
								return;
							}
						}
						field.checked = false;
					})();
				}
			}

			// SHIM: Pass the type onto the next page as one pipe-delimited query string value
			var form = document.querySelector('form');
			form.addEventListener('submit', function(e) {
				var typeFields = document.querySelectorAll('input[name="type_option"]:checked');
				var types = [];
				for (var index = 0; index < typeFields.length; index++) {
					types.push(typeFields[index].value);
					//typeFields[index].checked = false;
				}
				var hiddenType = document.getElementById('hidden-type');
				hiddenType.value = types.join('|');
				form.submit();
				e.preventDefault();
			}, false);

			// SHIM: Make the address persistent
			var address = getParameterByName('address');
			if (address) {
				var addressField = document.querySelector('input[name="address"]');
				addressField.value = address;
			}
		})();
		</script>

	</main>

</body>
</html>
